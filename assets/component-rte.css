/* Updated RTE to use new typography system with enhanced responsive behavior */
.rte {
  font-size: var(--font-text-md-size); /* Base: Text md (responsive) */
  line-height: var(--font-text-md-line-height);
  letter-spacing: normal; /* New typography system: no letter spacing for body text */
}

/* Tablet: Intermediate size */
@media screen and (min-width: 750px) and (max-width: 1199px) {
  .rte {
    font-size: calc(var(--font-text-md-size) * 1.1); /* Slightly larger on tablet */
  }
}

/* Desktop: Larger text for better readability */
@media screen and (min-width: 1200px) {
  .rte {
    font-size: var(--font-text-lg-size); /* Desktop: Text lg (responsive) */
    line-height: var(--font-text-lg-line-height);
  }
}
.rte:after {
  clear: both;
  content: "";
  display: block;
}
/* RTE headings inherit from base heading styles but ensure proper line heights */
.rte h1,
.rte h2,
.rte h3,
.rte h4,
.rte h5,
.rte h6 {
  /* Line heights are now handled by base heading styles in base.css */
  /* h1 uses Display xl line-height, h2 uses Display lg, etc. */
}
.rte h1 + p, .rte h1 + div, .rte h1 + span,
.rte h2 + p,
.rte h2 + div,
.rte h2 + span,
.rte h3 + p,
.rte h3 + div,
.rte h3 + span,
.rte h4 + p,
.rte h4 + div,
.rte h4 + span,
.rte h5 + p,
.rte h5 + div,
.rte h5 + span,
.rte h6 + p,
.rte h6 + div,
.rte h6 + span {
  margin-top: 0;
}
.rte h1,
.rte h2,
.rte h3,
.rte h4 {
  margin-top: 3.84rem; /* 24px: 2.4rem * 1.6 */
  margin-bottom: 1.28rem; /* 8px: 0.8rem * 1.6 */
}
.rte h1:first-child,
.rte h2:first-child,
.rte h3:first-child,
.rte h4:first-child {
  margin-top: 0;
}
@media screen and (min-width: 990px) {
  .rte h1,
  .rte h2,
  .rte h3,
  .rte h4 {
    margin-top: 7.68rem; /* 48px: 4.8rem * 1.6 */
    margin-bottom: 1.28rem; /* 8px: 0.8rem * 1.6 */
  }
}
.rte div {
  margin: 0;
}
.rte > div {
  margin: 1.28rem 0; /* 8px: 0.8rem * 1.6 */
}
@media screen and (min-width: 1200px) {
  .rte > div {
    margin: 3.84rem 0; /* 24px: 2.4rem * 1.6 */
  }
}
.rte > div:first-child {
  margin-top: 0;
}
.rte > div:last-child {
  margin-bottom: 0;
}
.rte > p {
  margin: 1.28rem 0; /* 8px: 0.8rem * 1.6 */
}
@media screen and (min-width: 1200px) {
  .rte > p {
    margin: 3.84rem 0; /* 24px: 2.4rem * 1.6 */
  }
}
.rte > p:first-child {
  margin-top: 0;
}
.rte > p:last-child {
  margin-bottom: 0;
}
.rte ol,
.rte ul {
  padding-left: 3.2rem; /* 20px: 2rem * 1.6 */
  margin: 0 0 2.56rem 0; /* 16px: 1.6rem * 1.6 */
}
@media screen and (min-width: 576px) {
  .rte ol,
  .rte ul {
    margin: 0 0 2.56rem 3.84rem; /* 16px, 24px: 1.6rem * 1.6, 2.4rem * 1.6 */
  }
}
.rte li {
  list-style: inherit;
  margin: 1.28rem 0rem; /* 8px: 0.8rem * 1.6 */
}
.rte li:last-child {
  margin-bottom: 0;
}
.rte ul li::marker {
  color: rgb(var(--color-foreground-secondary));
}
.rte a {
  color: rgb(var(--color-foreground));
  text-decoration-color: currentColor;
  text-underline-offset: 0.3rem;
  text-decoration-thickness: 0.1rem;
  transition: opacity var(--duration-default) ease;
}
.rte a:hover {
  opacity: 0.7;
}
.rte img,
.rte figure {
  height: auto;
  margin: 1.28rem 0; /* 8px: 0.8rem * 1.6 */
  border-radius: var(--border-radius-main);
  width: 100%;
  overflow: hidden;
  display: block;
}
@media screen and (min-width: 1200px) {
  .rte img,
  .rte figure {
    margin: 3.84rem 0; /* 24px: 2.4rem * 1.6 */
  }
}
.rte figure > img {
  margin: 0;
}
.rte figcaption {
  font-size: 1.2rem;
  line-height: 120%;
  color: rgb(var(--color-foreground-secondary));
}
.rte div img,
.rte div figure,
.rte p img,
.rte p figure {
  margin-top: 0;
  margin-bottom: 0;
}
.rte table {
  table-layout: fixed;
  display: block;
  overflow-x: auto;
  white-space: nowrap;
  margin: 0.32rem; /* 2px: 0.2rem * 1.6 */
  width: calc(100% - 0.64rem); /* 4px: 0.4rem * 1.6 */
}
.rte table::-webkit-scrollbar:horizontal {
  height: 0.4rem;
}
.rte table::-webkit-scrollbar-thumb {
  background-color: rgb(var(--color-border));
  border-radius: 2rem;
}
.rte table tbody {
  display: table;
  width: 100%;
}
@media screen and (min-width: 750px) {
  .rte table td {
    padding-left: 1.92rem; /* 12px: 1.2rem * 1.6 */
    padding-right: 1.92rem; /* 12px: 1.2rem * 1.6 */
  }
}
.rte iframe {
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-width: 100%;
}
/* Updated blockquote to use new typography system */
.rte blockquote {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  align-items: flex-start;
  gap: 0.8rem;
  width: 100%;
  padding: 4.8rem; /* 30px: 3rem * 1.6 */
  margin: 3.84rem 0; /* 24px: 2.4rem * 1.6 */
  border: none;
  font-family: var(--font-heading-family);
  border-radius: var(--border-radius-main);
  overflow: hidden;
  background-color: rgb(var(--color-background-secondary));
  /* Use Text lg for blockquotes */
  font-size: var(--font-text-lg-size);
  line-height: var(--font-text-lg-line-height);
  letter-spacing: normal; /* No letter spacing for text content */
  font-weight: var(--font-weight-regular);
}

/* Tablet: Intermediate blockquote size */
@media screen and (min-width: 750px) and (max-width: 1199px) {
  .rte blockquote {
    padding: 5.6rem; /* 35px: 3.5rem * 1.6 */
    font-size: calc(var(--font-text-lg-size) * 1.2); /* Slightly larger than Text lg */
  }
}

/* Desktop: Larger blockquotes for emphasis */
@media screen and (min-width: 1200px) {
  .rte blockquote {
    margin: 7.68rem 0; /* 48px: 4.8rem * 1.6 */
    padding: 6.4rem; /* 40px: 4rem * 1.6 */
    font-size: var(--font-display-sm-size); /* Display sm (30px) for emphasis */
    line-height: var(--font-display-sm-line-height);
  }
}

/* Mobile: Smaller padding and margins */
@media screen and (max-width: 749px) {
  .rte blockquote {
    margin: 2.56rem 0; /* 16px: 1.6rem * 1.6 */
    padding: 3.2rem; /* 20px: 2rem * 1.6 */
  }
}
.rte blockquote + * {
  margin-top: 0;
}
.rte blockquote::before {
  content: url("data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'><rect width='48' height='48' rx='24' fill='white'/><path d='M30.4795 20.6801C29.6795 20.9734 29.0662 21.4268 28.6395 22.0401C28.2395 22.6534 28.0395 23.3868 28.0395 24.2401H30.4795V29.6401H25.4795V24.2401C25.4795 23.4934 25.6129 22.8001 25.8795 22.1601C26.1462 21.5201 26.5062 20.9601 26.9595 20.4801C27.4129 19.9734 27.9329 19.5468 28.5195 19.2001C29.1329 18.8534 29.7862 18.5734 30.4795 18.3601V20.6801ZM22.5195 20.6801C21.7195 20.9734 21.1062 21.4268 20.6795 22.0401C20.2795 22.6534 20.0795 23.3868 20.0795 24.2401H22.5195V29.6401H17.5195V24.2401C17.5195 23.4934 17.6529 22.8001 17.9195 22.1601C18.1862 21.5201 18.5462 20.9601 18.9995 20.4801C19.4529 19.9734 19.9729 19.5468 20.5595 19.2001C21.1729 18.8534 21.8262 18.5734 22.5195 18.3601V20.6801Z' fill='%23131313'/></svg>");
  display: block;
  width: 4.8rem;
  height: 4.8rem;
  color: rgb(var(--color-foreground));
  background-color: rgb(var(--color-background));
  border-radius: 50%;
  overflow: hidden;
  position: absolute;
  top: 3rem;
  bottom: 3rem;
}
@media screen and (min-width: 1200px) {
  .rte blockquote::before {
    top: 4rem;
    bottom: 4rem;
  }
}
/* Blockquote attribution/source - smaller text */
.rte blockquote > p:last-child,
.rte blockquote > h1:last-child,
.rte blockquote > h2:last-child,
.rte blockquote > h3:last-child,
.rte blockquote > h4:last-child,
.rte blockquote > h5:last-child,
.rte blockquote > h6:last-child,
.rte blockquote > span:last-child,
.rte blockquote > div:last-child {
  font-size: var(--font-text-md-size); /* Text md for attribution */
  line-height: var(--font-text-md-line-height);
  color: rgb(var(--color-foreground-secondary));
  font-family: var(--font-body-family);
  font-weight: var(--font-weight-medium); /* Medium weight for attribution */
}
/* Blockquote main content - inherits from parent blockquote styles */
.rte blockquote > p:first-child,
.rte blockquote > h1:first-child,
.rte blockquote > h2:first-child,
.rte blockquote > h3:first-child,
.rte blockquote > h4:first-child,
.rte blockquote > h5:first-child,
.rte blockquote > h6:first-child,
.rte blockquote > span:first-child,
.rte blockquote > div:first-child {
  font-size: inherit; /* Inherit from parent blockquote */
  line-height: inherit;
  color: rgb(var(--color-foreground));
  font-family: var(--font-heading-family);
  font-weight: var(--font-weight-regular);
}

/* Desktop blockquote content inherits larger size */
@media screen and (min-width: 1200px) {
  .rte blockquote > p:first-child,
  .rte blockquote > h1:first-child,
  .rte blockquote > h2:first-child,
  .rte blockquote > h3:first-child,
  .rte blockquote > h4:first-child,
  .rte blockquote > h5:first-child,
  .rte blockquote > h6:first-child,
  .rte blockquote > span:first-child,
  .rte blockquote > div:first-child {
    font-size: inherit; /* Inherit Display sm size from parent */
    line-height: inherit;
  }
}
.rte blockquote > * {
  padding-left: 10.24rem; /* 64px: 6.4rem * 1.6 */
}
.rte blockquote img {
  margin-top: 2.56rem; /* 16px: 1.6rem * 1.6 */
  margin-bottom: 0;
}
.rte blockquote p {
  margin: 0;
}